{% extends 'base.html' %}
{% block content %}

{% if error %}
<br>
{{ error }}
<br>
{% endif %}

<!-- 요청내역 -->
<!-- 매장에서 요청 온 내역을 보는 곳 -->

<div class="container">
    <div class="row">
        <div class="col-lg-3">
            <h4>지난 요청 내역</h4>
            <div class="list-group">
                <a href="{% url 'requested_cart' %}" class="list-group-item">현재 요청 내역</a>
                <a href="{% url 'past' %}" class="list-group-item">지난 요청 내역</a>
            </div>
        </div>

        <div class="col-lg-9">
            <p>지난 요청 내역을 확인할 수 있습니다.<br> 결제 상태는 응답 여부에 따라 <strong>(-1: 거절, 0: 진행중, 1: 승인)</strong> 으로 표시됩니다.</p>
            <section class="row align-items-center my-5">
                {% for p in past %}
                <table>
                    <tr>
                        <th>번호</th>
                        <th>{{p.pk}}
                        </th>
                    </tr>
                    <tr>
                        <td>닉네임</td>
                        <td>{{p.receiver}}</td>
                    </tr>
                    <tr>
                        <td>결제 금액</td>
                        <td>{{p.total_price}}</td>
                    </tr>
                    <tr>
                        <td>가게 이름</td>
                        <td>{{p.title}}</td>
                    </tr>
                    <tr>
                        <td>요청인</td>
                        <td>
                            <form action="{% url 'past' %}" method="POST">
                                {% csrf_token %}
                                <input type="text" name="sender" value="{{p.sender}}" readonly>
                                <input type="submit" class="btn" name="myCustomer" id="mycus" value="고객등록">
                            </form>
                        </td>
                    </tr>
                    <tr>
                        <td>결제상태</td>
                        <td>{{p.status}}</td>
                    </tr>
                    <tr>
                        <td>일자</td>
                        <td>{{p.date}}</td>
                    </tr>
                </table>
            </section>
            <hr>
            {% endfor %}
        </div>
    </div>
</div>
<style>
    .list-group {
        margin-top: 1rem;
    }

    table {
        text-align: center;
        width: 80%;
    }

    td {
        border-bottom: 1px solid #c0c0c0;
    }

    th {
        background-color: #c0c0c0;
        color: white;
        height: 30px;
        padding: 10px;
        font-size: 20px;
    }
    .btn{
        background-color: darkgray;
        color:white;
    }
</style>


{% endblock %}